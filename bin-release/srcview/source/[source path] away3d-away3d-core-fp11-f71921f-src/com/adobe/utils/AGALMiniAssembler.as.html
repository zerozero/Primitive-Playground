<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>AGALMiniAssembler.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">/*
Copyright (c) 2011, Adobe Systems Incorporated
All rights reserved.

Redistribution and use in source and binary forms, with or without 
modification, are permitted provided that the following conditions are
met:

* Redistributions of source code must retain the above copyright notice, 
this list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the 
documentation and/or other materials provided with the distribution.

* Neither the name of Adobe Systems Incorporated nor the names of its 
contributors may be used to endorse or promote products derived from 
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/</span>

<span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">adobe</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">// ===========================================================================
</span>    <span class="ActionScriptComment">//    Imports
</span>    <span class="ActionScriptComment">// ---------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//import flash.display3D.*;
</span>    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptComment">// ===========================================================================
</span>    <span class="ActionScriptComment">//    Class
</span>    <span class="ActionScriptComment">// ---------------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">AGALMiniAssembler</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// ======================================================================
</span>        <span class="ActionScriptComment">//    Properties
</span>        <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>        <span class="ActionScriptComment">// AGAL bytes and error buffer 
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_agalcode</span>:<span class="ActionScriptDefault_Text">ByteArray</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_error</span>:<span class="ActionScriptDefault_Text">String</span>                                <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">debugEnabled</span>:<span class="ActionScriptDefault_Text">Boolean</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">initialized</span>:<span class="ActionScriptDefault_Text">Boolean</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        <span class="ActionScriptComment">// ======================================================================
</span>        <span class="ActionScriptComment">//    Getters
</span>        <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_error</span>; <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">ByteArray</span>                <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_agalcode</span>; <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// ======================================================================
</span>        <span class="ActionScriptComment">//    Constructor
</span>        <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">AGALMiniAssembler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">debugging</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">debugEnabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">debugging</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptComment">// ======================================================================
</span>        <span class="ActionScriptComment">//    Methods
</span>        <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">assemble</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mode</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">source</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">verbose</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">ByteArray</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">start</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getTimer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">_agalcode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ByteArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            
            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isFrag</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mode</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FRAGMENT</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">isFrag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mode</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">VERTEX</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">'ERROR: mode needs to be "'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">FRAGMENT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">'" or "'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">VERTEX</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">'" but is "'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mode</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">'".'</span>;
            
            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">endian</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Endian</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LITTLE_ENDIAN</span>;
            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> 0xa0 <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptComment">// tag version
</span>            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeUnsignedInt</span><span class="ActionScriptBracket/Brace">(</span> 0x1 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptComment">// AGAL version, big endian, bit pattern will be 0x01000000
</span>            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> 0xa1 <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptComment">// tag program id
</span>            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isFrag</span> <span class="ActionScriptOperator">?</span> 1 : 0 <span class="ActionScriptBracket/Brace">)</span>;    <span class="ActionScriptComment">// vertex or fragment
</span>            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lines</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/[\f\n\r\v]+/g</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"\n"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"\n"</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nest</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nops</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lng</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">lng</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">line</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">// remove comments
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">startcomment</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"//"</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">startcomment</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">startcomment</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">// grab options
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">optsi</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/&lt;.*&gt;/g</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">opts</span>:<span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optsi</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">opts</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optsi</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/([\w\.\-\+]+)/gi</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">optsi</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptComment">// find opcode
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">opCode</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/^\w{3}/ig</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">opFound</span>:<span class="ActionScriptDefault_Text">OpCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">opCode</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">]</span>;
                
                <span class="ActionScriptComment">// if debug is enabled, output the opcodes
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">debugEnabled</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;=</span> 3 <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"warning: bad line "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">": "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">continue</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptDefault_Text">line</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">// nesting check
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">OP_DEC_NEST</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">nest</span><span class="ActionScriptOperator">--</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">nest</span> <span class="ActionScriptOperator">&lt;</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: conditional closes without open."</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">nest</span><span class="ActionScriptOperator">++</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">nest</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">MAX_NESTING</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: nesting to deep, maximum allowed is "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">MAX_NESTING</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"."</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">OP_FRAG_ONLY</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isFrag</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: opcode is only allowed in fragment programs."</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"emit opcode="</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">opFound</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeUnsignedInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">emitCode</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">nops</span><span class="ActionScriptOperator">++</span>;
                
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">nops</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">MAX_OPCODES</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: too many opcodes. maximum is "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">MAX_OPCODES</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"."</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptComment">// get operands, use regexp
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regs</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">line</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/vc\[([vof][actps]?)(\d*)?(\.[xyzw](\+\d{1,3})?)?\](\.[xyzw]{1,4})?|([vof][actps]?)(\d*)?(\.[xyzw]{1,4})?/gi</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">numRegister</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: wrong number of operands. found "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" but expected "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">numRegister</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"."</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">badreg</span>:<span class="ActionScriptDefault_Text">Boolean</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pad</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptOperator">=</span> 64 <span class="ActionScriptOperator">+</span> 64 <span class="ActionScriptOperator">+</span> 32;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regLength</span>:<span class="ActionScriptDefault_Text">uint</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">regLength</span>; <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isRelative</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">relreg</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/\[.*\]/ig</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptBracket/Brace">[</span> 0 <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span>;
                        
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"IS REL"</span> <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">res</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/^\b[A-Za-z]{1,2}/ig</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regFound</span>:<span class="ActionScriptDefault_Text">Register</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">res</span><span class="ActionScriptBracket/Brace">[</span> 0 <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">]</span>;
                    
                    <span class="ActionScriptComment">// if debug is enabled, output the registers
</span>                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">debugEnabled</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span> <span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: could not parse operand "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" ("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">")."</span>;
                        <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isFrag</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: register operand "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" ("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">") only allowed in vertex programs."</span>;
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: register operand "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" ("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">") relative adressing not allowed in fragment programs."</span>;
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>            
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: register operand "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" ("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">") only allowed in fragment programs."</span>;
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptComment">//trace( "REGNUM: " +regs[j] );
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">idxmatch</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/\d+/</span> <span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/\d+/</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regidx</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">idxmatch</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">regidx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">idxmatch</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">regidx</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: register operand "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" ("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">") index exceeds limit of "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"."</span>;
                        <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regmask</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">maskmatch</span>:<span class="ActionScriptDefault_Text">Array</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regs</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/(\.[xyzw]{1,4})/</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isDest</span>:<span class="ActionScriptDefault_Text">Boolean</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">==</span> 0 <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isSampler</span>:<span class="ActionScriptDefault_Text">Boolean</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">==</span> 2 <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">opFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flags</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_TEX</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">reltype</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">relsel</span>:<span class="ActionScriptDefault_Text">uint</span>            <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">reloffset</span>:<span class="ActionScriptDefault_Text">int</span>        <span class="ActionScriptOperator">=</span> 0;
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isDest</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: relative can not be destination"</span>;    
                        <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
                        <span class="ActionScriptReserved">break</span>;                                
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">maskmatch</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptOperator">=</span> 0;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cv</span>:<span class="ActionScriptDefault_Text">uint</span>; 
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">maskLength</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">maskmatch</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">k</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">maskLength</span>; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">cv</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">maskmatch</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">cv</span> <span class="ActionScriptOperator">&gt;</span> 2 <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptDefault_Text">cv</span> <span class="ActionScriptOperator">=</span> 3;
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isDest</span> <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptOperator">|=</span> 1 <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptDefault_Text">cv</span>;
                            <span class="ActionScriptReserved">else</span>
                                <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptOperator">|=</span> <span class="ActionScriptDefault_Text">cv</span> <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">-</span> 1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;&lt;</span> 1 <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isDest</span> <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> ; <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">&lt;=</span> 4; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptOperator">|=</span> <span class="ActionScriptDefault_Text">cv</span> <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">-</span> 1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;&lt;</span> 1 <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">// repeat last                                
</span>                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">isDest</span> <span class="ActionScriptOperator">?</span> 0xf : 0xe4; <span class="ActionScriptComment">// id swizzle or mask                        
</span>                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">relname</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/[A-Za-z]{1,2}/ig</span> <span class="ActionScriptBracket/Brace">)</span>;                        
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">regFoundRel</span>:<span class="ActionScriptDefault_Text">Register</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">relname</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;                        
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFoundRel</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span> 
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: bad index register"</span>; 
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptDefault_Text">reltype</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">regFoundRel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">emitCode</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selmatch</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/(\.[xyzw]{1,1})/</span> <span class="ActionScriptBracket/Brace">)</span>;                        
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">selmatch</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">==</span>0 <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: bad index register select"</span>; 
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
                            <span class="ActionScriptReserved">break</span>;                        
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptDefault_Text">relsel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selmatch</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charCodeAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">relsel</span> <span class="ActionScriptOperator">&gt;</span> 2 <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptDefault_Text">relsel</span> <span class="ActionScriptOperator">=</span> 3; 
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">relofs</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">relreg</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">/\+\d{1,3}/ig</span> <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">relofs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0 <span class="ActionScriptBracket/Brace">)</span> 
                            <span class="ActionScriptDefault_Text">reloffset</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">relofs</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;                         
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">reloffset</span> <span class="ActionScriptOperator">&lt;</span> 0 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">reloffset</span> <span class="ActionScriptOperator">&gt;</span> 255 <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error: index offset "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">reloffset</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" out of bounds. [0..255]"</span>; 
                            <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
                            <span class="ActionScriptReserved">break</span>;                            
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"RELATIVE: type="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">reltype</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"=="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">relname</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" sel="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">relsel</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"=="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">selmatch</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" idx="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regidx</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" offset="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">reloffset</span> <span class="ActionScriptBracket/Brace">)</span>; 
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"  emit argcode="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"["</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regidx</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"]["</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">regmask</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"]"</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isDest</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>                                                
                        <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeShort</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regidx</span> <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">emitCode</span> <span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">pad</span> <span class="ActionScriptOperator">-=</span> 32; 
                    <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isSampler</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"  emit sampler"</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">samplerbits</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 5; <span class="ActionScriptComment">// type 5 
</span>                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">optsLength</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">opts</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bias</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0; 
                            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">optsLength</span>; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"    opt: "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">opts</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">optfound</span>:<span class="ActionScriptDefault_Text">Sampler</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">SAMPLEMAP</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">opts</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optfound</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptComment">// todo check that it's a number...
</span>                                    <span class="ActionScriptComment">//trace( "Warning, unknown sampler option: "+opts[k] );
</span>                                    <span class="ActionScriptDefault_Text">bias</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">opts</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>; 
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                                        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"    bias: "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">bias</span> <span class="ActionScriptBracket/Brace">)</span>;                                                                    
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">else</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optfound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">SAMPLER_SPECIAL_SHIFT</span> <span class="ActionScriptBracket/Brace">)</span>
                                        <span class="ActionScriptDefault_Text">samplerbits</span> <span class="ActionScriptOperator">&amp;=</span> <span class="ActionScriptOperator">~</span><span class="ActionScriptBracket/Brace">(</span> 0xf <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptDefault_Text">optfound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptBracket/Brace">)</span>;                                        
                                    <span class="ActionScriptDefault_Text">samplerbits</span> <span class="ActionScriptOperator">|=</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optfound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mask</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;&lt;</span> <span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">optfound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeShort</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regidx</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bias</span><span class="ActionScriptOperator">*</span>8.0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;                            
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeUnsignedInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">samplerbits</span> <span class="ActionScriptBracket/Brace">)</span>;
                            
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"    bits: "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">samplerbits</span> <span class="ActionScriptOperator">-</span> 5 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">pad</span> <span class="ActionScriptOperator">-=</span> 64;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">else</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">==</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeUnsignedInt</span><span class="ActionScriptBracket/Brace">(</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">pad</span> <span class="ActionScriptOperator">-=</span> 32;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeShort</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regidx</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">reloffset</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regmask</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">regFound</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">emitCode</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">reltype</span> <span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeShort</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isRelative</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">relsel</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptBracket/Brace">(</span> 1 <span class="ActionScriptOperator">&lt;&lt;</span> 15 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> : 0 <span class="ActionScriptBracket/Brace">)</span>;
                            
                            <span class="ActionScriptDefault_Text">pad</span> <span class="ActionScriptOperator">-=</span> 64;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptComment">// pad unused regs
</span>                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">pad</span>; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">+=</span> 8 <span class="ActionScriptBracket/Brace">)</span> 
                    <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">writeByte</span><span class="ActionScriptBracket/Brace">(</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">badreg</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">break</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"\n  at line "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">" "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">lines</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">=</span> 0;
                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_error</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// trace the bytecode bytes if debugging is enabled
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">debugEnabled</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dbgLine</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"generated bytecode:"</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">agalLength</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">agalLength</span>; <span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">%</span> 16 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">dbgLine</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"\n"</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">%</span> 4 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">dbgLine</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">" "</span>;
                    
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">byteStr</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">agalcode</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span> 16 <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">byteStr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&lt;</span> 2 <span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">byteStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">byteStr</span>;
                    
                    <span class="ActionScriptDefault_Text">dbgLine</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">byteStr</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">dbgLine</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">verbose</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"AGALMiniAssembler.assemble time: "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getTimer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">start</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 1000 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"s"</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">agalcode</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            
            <span class="ActionScriptComment">// Fill the dictionaries with opcodes and registers
</span>            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MOV</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MOV</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x00<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">ADD</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ADD</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x01<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SUB</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SUB</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x02<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MUL</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MUL</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x03<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">DIV</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">DIV</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x04<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">RCP</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">RCP</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x05<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;                    
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MIN</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MIN</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x06<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MAX</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MAX</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x07<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">FRC</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FRC</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x08<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;            
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SQT</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SQT</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x09<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">RSQ</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">RSQ</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x0a<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">POW</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">POW</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x0b<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">LOG</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">LOG</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x0c<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">EXP</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">EXP</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x0d<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">NRM</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">NRM</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x0e<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SIN</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SIN</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x0f<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">COS</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">COS</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x10<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">CRS</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">CRS</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x11<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">DP3</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">DP3</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x12<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">DP4</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">DP4</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x13<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;                    
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">ABS</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ABS</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x14<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">NEG</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">NEG</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x15<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SAT</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SAT</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x16<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">M33</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">M33</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x17<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_MATRIX</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">M44</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">M44</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x18<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_MATRIX</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">M34</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">M34</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x19<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_MATRIX</span> <span class="ActionScriptBracket/Brace">)</span>;            
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IFZ</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IFZ</span><span class="ActionScriptOperator">,</span> 1<span class="ActionScriptOperator">,</span> 0x1a<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">INZ</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">INZ</span><span class="ActionScriptOperator">,</span> 1<span class="ActionScriptOperator">,</span> 0x1b<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IFE</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IFE</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x1c<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">INE</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">INE</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x1d<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IFG</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IFG</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x1e<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IFL</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IFL</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x1f<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IEG</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IEG</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x20<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">IEL</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IEL</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x21<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">ELS</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ELS</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> 0x22<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_DEC_NEST</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">EIF</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">EIF</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> 0x23<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_DEC_NEST</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">REP</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">REP</span><span class="ActionScriptOperator">,</span> 1<span class="ActionScriptOperator">,</span> 0x24<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">ERP</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">ERP</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> 0x25<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_DEC_NEST</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">BRK</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">BRK</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> 0x26<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">KIL</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">KIL</span><span class="ActionScriptOperator">,</span> 1<span class="ActionScriptOperator">,</span> 0x27<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_FRAG_ONLY</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">TEX</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">TEX</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x28<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">OP_FRAG_ONLY</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_TEX</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SGE</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SGE</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x29<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SLT</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SLT</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptOperator">,</span> 0x2a<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">OPMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SGN</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SGN</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptOperator">,</span> 0x2b<span class="ActionScriptOperator">,</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">VA</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">VA</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"vertex attribute"</span><span class="ActionScriptOperator">,</span>        0x0<span class="ActionScriptOperator">,</span>    7<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">VC</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">VC</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"vertex constant"</span><span class="ActionScriptOperator">,</span>        0x1<span class="ActionScriptOperator">,</span>    127<span class="ActionScriptOperator">,</span>    <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">VT</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">VT</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"vertex temporary"</span><span class="ActionScriptOperator">,</span>        0x2<span class="ActionScriptOperator">,</span>    7<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_WRITE</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">OP</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">OP</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"vertex output"</span><span class="ActionScriptOperator">,</span>        0x3<span class="ActionScriptOperator">,</span>    0<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_WRITE</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">V</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">V</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"varying"</span><span class="ActionScriptOperator">,</span>                0x4<span class="ActionScriptOperator">,</span>    7<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_VERT</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_WRITE</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">FC</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FC</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"fragment constant"</span><span class="ActionScriptOperator">,</span>    0x1<span class="ActionScriptOperator">,</span>    27<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">FT</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FT</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"fragment temporary"</span><span class="ActionScriptOperator">,</span>    0x2<span class="ActionScriptOperator">,</span>    7<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_WRITE</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">FS</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FS</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"texture sampler"</span><span class="ActionScriptOperator">,</span>        0x5<span class="ActionScriptOperator">,</span>    7<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_READ</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">REGMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">OC</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">OC</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptString">"fragment output"</span><span class="ActionScriptOperator">,</span>        0x3<span class="ActionScriptOperator">,</span>    0<span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">REG_FRAG</span> <span class="ActionScriptOperator">|</span> <span class="ActionScriptDefault_Text">REG_WRITE</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">D2</span> <span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">D2</span><span class="ActionScriptOperator">,</span>            <span class="ActionScriptDefault_Text">SAMPLER_DIM_SHIFT</span><span class="ActionScriptOperator">,</span>        0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">D3</span> <span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">D3</span><span class="ActionScriptOperator">,</span>            <span class="ActionScriptDefault_Text">SAMPLER_DIM_SHIFT</span><span class="ActionScriptOperator">,</span>        2 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">CUBE</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">CUBE</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_DIM_SHIFT</span><span class="ActionScriptOperator">,</span>        1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MIPNEAREST</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MIPNEAREST</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptDefault_Text">SAMPLER_MIPMAP_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MIPLINEAR</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MIPLINEAR</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptDefault_Text">SAMPLER_MIPMAP_SHIFT</span><span class="ActionScriptOperator">,</span>    2 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">MIPNONE</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">MIPNONE</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_MIPMAP_SHIFT</span><span class="ActionScriptOperator">,</span>    0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">NOMIP</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">NOMIP</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_MIPMAP_SHIFT</span><span class="ActionScriptOperator">,</span>    0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">NEAREST</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">NEAREST</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_FILTER_SHIFT</span><span class="ActionScriptOperator">,</span>    0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">LINEAR</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">LINEAR</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_FILTER_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">CENTROID</span> <span class="ActionScriptBracket/Brace">]</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">CENTROID</span><span class="ActionScriptOperator">,</span>    <span class="ActionScriptDefault_Text">SAMPLER_SPECIAL_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptOperator">&lt;&lt;</span> 0 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">SINGLE</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SINGLE</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_SPECIAL_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptOperator">&lt;&lt;</span> 1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">DEPTH</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">DEPTH</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_SPECIAL_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptOperator">&lt;&lt;</span> 2 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">REPEAT</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">REPEAT</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_REPEAT_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">WRAP</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">WRAP</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_REPEAT_SHIFT</span><span class="ActionScriptOperator">,</span>    1 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">SAMPLEMAP</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">CLAMP</span> <span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">CLAMP</span><span class="ActionScriptOperator">,</span>        <span class="ActionScriptDefault_Text">SAMPLER_REPEAT_SHIFT</span><span class="ActionScriptOperator">,</span>    0 <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// ======================================================================
</span>        <span class="ActionScriptComment">//    Constants
</span>        <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OPMAP</span>:<span class="ActionScriptDefault_Text">Dictionary</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REGMAP</span>:<span class="ActionScriptDefault_Text">Dictionary</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLEMAP</span>:<span class="ActionScriptDefault_Text">Dictionary</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MAX_NESTING</span>:<span class="ActionScriptDefault_Text">int</span>                    <span class="ActionScriptOperator">=</span> 4;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MAX_OPCODES</span>:<span class="ActionScriptDefault_Text">int</span>                    <span class="ActionScriptOperator">=</span> 256;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FRAGMENT</span>:<span class="ActionScriptDefault_Text">String</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"fragment"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">VERTEX</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"vertex"</span>;
        
        <span class="ActionScriptComment">// masks and shifts
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLER_DIM_SHIFT</span>:<span class="ActionScriptDefault_Text">uint</span>                <span class="ActionScriptOperator">=</span> 12;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLER_SPECIAL_SHIFT</span>:<span class="ActionScriptDefault_Text">uint</span>            <span class="ActionScriptOperator">=</span> 16;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLER_REPEAT_SHIFT</span>:<span class="ActionScriptDefault_Text">uint</span>            <span class="ActionScriptOperator">=</span> 20;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLER_MIPMAP_SHIFT</span>:<span class="ActionScriptDefault_Text">uint</span>            <span class="ActionScriptOperator">=</span> 24;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAMPLER_FILTER_SHIFT</span>:<span class="ActionScriptDefault_Text">uint</span>            <span class="ActionScriptOperator">=</span> 28;
        
        <span class="ActionScriptComment">// regmap flags
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REG_WRITE</span>:<span class="ActionScriptDefault_Text">uint</span>                        <span class="ActionScriptOperator">=</span> 0x1;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REG_READ</span>:<span class="ActionScriptDefault_Text">uint</span>                        <span class="ActionScriptOperator">=</span> 0x2;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REG_FRAG</span>:<span class="ActionScriptDefault_Text">uint</span>                        <span class="ActionScriptOperator">=</span> 0x20;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REG_VERT</span>:<span class="ActionScriptDefault_Text">uint</span>                        <span class="ActionScriptOperator">=</span> 0x40;
        
        <span class="ActionScriptComment">// opmap flags
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_SCALAR</span>:<span class="ActionScriptDefault_Text">uint</span>                        <span class="ActionScriptOperator">=</span> 0x1;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_INC_NEST</span>:<span class="ActionScriptDefault_Text">uint</span>                    <span class="ActionScriptOperator">=</span> 0x2;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_DEC_NEST</span>:<span class="ActionScriptDefault_Text">uint</span>                    <span class="ActionScriptOperator">=</span> 0x4;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_TEX</span>:<span class="ActionScriptDefault_Text">uint</span>                <span class="ActionScriptOperator">=</span> 0x8;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_SPECIAL_MATRIX</span>:<span class="ActionScriptDefault_Text">uint</span>                <span class="ActionScriptOperator">=</span> 0x10;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_FRAG_ONLY</span>:<span class="ActionScriptDefault_Text">uint</span>                    <span class="ActionScriptOperator">=</span> 0x20;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_VERT_ONLY</span>:<span class="ActionScriptDefault_Text">uint</span>                    <span class="ActionScriptOperator">=</span> 0x40;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP_NO_DEST</span>:<span class="ActionScriptDefault_Text">uint</span>                    <span class="ActionScriptOperator">=</span> 0x80;
        
        <span class="ActionScriptComment">// opcodes
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MOV</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mov"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">ADD</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"add"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SUB</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sub"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MUL</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mul"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DIV</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"div"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">RCP</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"rcp"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MIN</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"min"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MAX</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"max"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FRC</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"frc"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SQT</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sqt"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">RSQ</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"rsq"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">POW</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"pow"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">LOG</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"log"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">EXP</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"exp"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">NRM</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"nrm"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SIN</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sin"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COS</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"cos"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CRS</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"crs"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DP3</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"dp3"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DP4</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"dp4"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">ABS</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"abs"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">NEG</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"neg"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SAT</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sat"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">M33</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"m33"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">M44</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"m44"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">M34</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"m34"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IFZ</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ifz"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">INZ</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"inz"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IFE</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ife"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">INE</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ine"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IFG</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ifg"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IFL</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ifl"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IEG</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ieg"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IEL</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"iel"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">ELS</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"els"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">EIF</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"eif"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REP</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"rep"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">ERP</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"erp"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">BRK</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"brk"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">KIL</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"kil"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">TEX</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"tex"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SGE</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sge"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SLT</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"slt"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SGN</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"sgn"</span>;
        
        <span class="ActionScriptComment">// registers
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">VA</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"va"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">VC</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"vc"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">VT</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"vt"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OP</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"op"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">V</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"v"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FC</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"fc"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FT</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ft"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FS</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"fs"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">OC</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"oc"</span>;
        
        <span class="ActionScriptComment">// samplers
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">D2</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"2d"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">D3</span>:<span class="ActionScriptDefault_Text">String</span>                            <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"3d"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CUBE</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"cube"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MIPNEAREST</span>:<span class="ActionScriptDefault_Text">String</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mipnearest"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MIPLINEAR</span>:<span class="ActionScriptDefault_Text">String</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"miplinear"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MIPNONE</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mipnone"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">NOMIP</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"nomip"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">NEAREST</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"nearest"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">LINEAR</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"linear"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CENTROID</span>:<span class="ActionScriptDefault_Text">String</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"centroid"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SINGLE</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"single"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DEPTH</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"depth"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">REPEAT</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"repeat"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">WRAP</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"wrap"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CLAMP</span>:<span class="ActionScriptDefault_Text">String</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"clamp"</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">// ===========================================================================
</span><span class="ActionScriptComment">//    Class
</span><span class="ActionScriptComment">// ---------------------------------------------------------------------------
</span><span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">OpCode</span>
<span class="ActionScriptBracket/Brace">{</span>        
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Properties
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_emitCode</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_flags</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_name</span>:<span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_numRegister</span>:<span class="ActionScriptDefault_Text">uint</span>;
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Getters
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">emitCode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_emitCode</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">flags</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_flags</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_name</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">numRegister</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>    <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_numRegister</span>; <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Constructor
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">OpCode</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numRegister</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">emitCode</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">flags</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">_name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">name</span>;
        <span class="ActionScriptDefault_Text">_numRegister</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">numRegister</span>;
        <span class="ActionScriptDefault_Text">_emitCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">emitCode</span>;
        <span class="ActionScriptDefault_Text">_flags</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flags</span>;
    <span class="ActionScriptBracket/Brace">}</span>        
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Methods
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"[OpCode name=\""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_name</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"\", numRegister="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_numRegister</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", emitCode="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_emitCode</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", flags="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_flags</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"]"</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">// ===========================================================================
</span><span class="ActionScriptComment">//    Class
</span><span class="ActionScriptComment">// ---------------------------------------------------------------------------
</span><span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">Register</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Properties
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_emitCode</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_name</span>:<span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_longName</span>:<span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_flags</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_range</span>:<span class="ActionScriptDefault_Text">uint</span>;
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Getters
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">emitCode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_emitCode</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">longName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>    <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_longName</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_name</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">flags</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_flags</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">range</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_range</span>; <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Constructor
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">Register</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">longName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">emitCode</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">range</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">flags</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">_name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">name</span>;
        <span class="ActionScriptDefault_Text">_longName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">longName</span>;
        <span class="ActionScriptDefault_Text">_emitCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">emitCode</span>;
        <span class="ActionScriptDefault_Text">_range</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">range</span>;
        <span class="ActionScriptDefault_Text">_flags</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flags</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Methods
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"[Register name=\""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_name</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"\", longName=\""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_longName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"\", emitCode="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_emitCode</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", range="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_range</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", flags="</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">_flags</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"]"</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">// ===========================================================================
</span><span class="ActionScriptComment">//    Class
</span><span class="ActionScriptComment">// ---------------------------------------------------------------------------
</span><span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">Sampler</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Properties
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_flag</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_mask</span>:<span class="ActionScriptDefault_Text">uint</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_name</span>:<span class="ActionScriptDefault_Text">String</span>;
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Getters
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">flag</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_flag</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">mask</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span>        <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_mask</span>; <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>    <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_name</span>; <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Constructor
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">Sampler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">mask</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">_name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">name</span>;
        <span class="ActionScriptDefault_Text">_flag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flag</span>;
        <span class="ActionScriptDefault_Text">_mask</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mask</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">// ======================================================================
</span>    <span class="ActionScriptComment">//    Methods
</span>    <span class="ActionScriptComment">// ----------------------------------------------------------------------
</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"[Sampler name=\""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_name</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"\", flag=\""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_flag</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"\", mask="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mask</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"]"</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
