<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>XMLListener.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptASDoc">/**
 * Copyright (c) 2009 Digital Primates IT Consulting Group
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author     Jeff Tapper 
 * @version    
 **/</span> 

<span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">notification</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">async</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Event</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EventDispatcher</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IOErrorEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SecurityErrorEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">net</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">XMLSocket</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reporting</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FailureFormatter</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Descriptor</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IDescription</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Result</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">notification</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Failure</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flexunit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runner</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">notification</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IAsyncStartupRunListener</span>;


    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">XMLListener</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">EventDispatcher</span> <span class="ActionScriptReserved">implements</span> <span class="ActionScriptDefault_Text">IAsyncStartupRunListener</span>
    <span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptComment">//private var logger:ILogger = Log.getLogger( "XMLListener" );
</span>        
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SUCCESS</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"success"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">ERROR</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"error"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FAILURE</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"failure"</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">IGNORE</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ignore"</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">successes</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ignores</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_ready</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">END_OF_TEST_RUN</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"&lt;endOfTestRun/&gt;"</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">socket</span>:<span class="ActionScriptDefault_Text">XMLSocket</span>;
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">port</span> : <span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 8765;
        
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Inspectable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">server</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"127.0.0.1"</span>; <span class="ActionScriptComment">//this is local host. same machine
</span>        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lastFailedTest</span>:<span class="ActionScriptDefault_Text">IDescription</span>;
        
        <span class="ActionScriptComment">//private var msgQueue:Array = new Array();
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">projectName</span>:<span class="ActionScriptDefault_Text">String</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">contextName</span>:<span class="ActionScriptDefault_Text">String</span>;

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">XMLListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">projectName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">contextName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">projectName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">projectName</span>;
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">contextName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">contextName</span>;

            <span class="ActionScriptDefault_Text">socket</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">XMLSocket</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
              <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CONNECT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">handleConnect</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">IOErrorEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IO_ERROR</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">errorHandler</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SecurityErrorEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SECURITY_ERROR</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">errorHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                  <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CLOSE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">errorHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                  <span class="ActionScriptReserved">try</span>
                  <span class="ActionScriptBracket/Brace">{</span>
                      <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">connect</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">server</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">port</span> <span class="ActionScriptBracket/Brace">)</span>;
                  <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">catch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                      <span class="ActionScripttrace">trace</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">message</span><span class="ActionScriptBracket/Brace">)</span>;
                  <span class="ActionScriptBracket/Brace">}</span>
                  
                  
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"listenerReady"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">ready</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_ready</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getTestCount</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">description</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">testCount</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testRunStarted</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// XML Socket in flexbuilder is expecting a startTestRun node at the begining of the results.
</span>            <span class="ActionScriptComment">// it seems to use this to reset hte current results, and prepopulate the total number of tests
</span>            <span class="ActionScriptComment">// however, in flexunit4, we are unable to determine the total number of tests before hand, so
</span>            <span class="ActionScriptComment">// we are sending through an empty startTestRun node, so the reset can still happen.
</span>            <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&lt;startTestRun totalTestCount='"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">getTestCount</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"'  projectName='"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">projectName</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"' contextName='"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">contextName</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' /&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testRunFinished</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Result</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
        
            <span class="ActionScriptComment">// if we want to wait until all tests are finished before sending any results, 
</span>            <span class="ActionScriptComment">// in this method we should first call printHeader, then printResults, then printFooter
</span>            <span class="ActionScriptComment">// however, as we are now sending through results as they happen, we use this method only to call printFooter        
</span>            <span class="ActionScriptComment">//printHeader( result );
</span>            <span class="ActionScriptComment">//printResults(result);
</span>            <span class="ActionScriptDefault_Text">printFooter</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testStarted</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// called before each test
</span>        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testFinished</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// called after each test
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">lastFailedTest</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">description</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayName</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">lastFailedTest</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayName</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">desc</span>:<span class="ActionScriptDefault_Text">Descriptor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getDescriptorFromDescription</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">description</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&lt;testCase name='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">desc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' testSuite='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">desc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'  status='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">SUCCESS</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'/&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptComment">//msgQueue.push( "&lt;testCase name='"+desc.method+"' testSuite='"+desc.suite+"'  status='"+SUCCESS+"'/&gt;");
</span>            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testAssumptionFailure</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">failure</span>:<span class="ActionScriptDefault_Text">Failure</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// called on assumptionFail
</span>        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testIgnored</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// called on ignored test
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">desc</span>:<span class="ActionScriptDefault_Text">Descriptor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getDescriptorFromDescription</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">description</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&lt;testCase name='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">desc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' testSuite='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">desc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'  status='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">IGNORE</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'/&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">//msgQueue.push("&lt;testCase name='"+desc.method+"' testSuite='"+desc.suite+"'  status='"+IGNORE+"'/&gt;");
</span>        <span class="ActionScriptBracket/Brace">}</span>
    
    
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">testFailure</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">failure</span>:<span class="ActionScriptDefault_Text">Failure</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// called on a test failure
</span>            <span class="ActionScriptDefault_Text">lastFailedTest</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">description</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">descriptor</span>:<span class="ActionScriptDefault_Text">Descriptor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getDescriptorFromDescription</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">description</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">type</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">description</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayName</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">message</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FailureFormatter</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">xmlEscapeMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">message</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">stackTrace</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FailureFormatter</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">xmlEscapeMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stackTrace</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">methodName</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">method</span>;
                        
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xmlString</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptDefault_Text">xmlString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FailureFormatter</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">isError</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">failure</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">exception</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xmlString</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isError</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">methodName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suite</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xmlString</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isError</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">xmlString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createErrorMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">xmlString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createFailureMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">xmlString</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createFailureMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">methodName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suite</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xml</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptString">"&lt;testCase name='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' testSuite='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'  status='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">FAILURE</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'&gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;failure type='"</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' &gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;messageInfo&gt;"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">message</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"&lt;/messageInfo&gt;"</span><span class="ActionScriptOperator">+</span>  
                <span class="ActionScriptString">"&lt;stackTraceInfo&gt;"</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">stackTrace</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"&lt;/stackTraceInfo&gt;"</span><span class="ActionScriptOperator">+</span> 
                <span class="ActionScriptString">"&lt;/failure&gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;/testCase&gt;"</span>;

            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">xml</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createErrorMessage</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">methodName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suite</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">message</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">stackTrace</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xml</span> : <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptString">"&lt;testCase name='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' testSuite='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">suite</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'  status='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">ERROR</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'&gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;error type='"</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' &gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;messageInfo&gt;"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">message</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"&lt;/messageInfo&gt;"</span><span class="ActionScriptOperator">+</span>  
                <span class="ActionScriptString">"&lt;stackTraceInfo&gt;"</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">stackTrace</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"&lt;/stackTraceInfo&gt;"</span><span class="ActionScriptOperator">+</span> 
                <span class="ActionScriptString">"&lt;/error&gt;"</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptString">"&lt;/testCase&gt;"</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">xml</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptComment">/*
         * Internal methods
         */</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getDescriptorFromDescription</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">description</span>:<span class="ActionScriptDefault_Text">IDescription</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Descriptor</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// reads relavent data from descriptor
</span>            <span class="ActionScriptASDoc">/**
             * JAdkins - 7/27/07 - FXU-53 - Listener was returning a null value for the test class
             * causing no data to be returned.  If length of array is greater than 1, then class is
             * not in the default package.  If array length is 1, then test class is default package
             * and formats accordingly.
             **/</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">descriptor</span>:<span class="ActionScriptDefault_Text">Descriptor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Descriptor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">descriptionArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">description</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayName</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"::"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classMethod</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">descriptionArray</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">path</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">descriptionArray</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptDefault_Text">classMethod</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">descriptionArray</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">classMethod</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">descriptionArray</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classMethodArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">classMethod</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">suite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">path</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span>  <span class="ActionScriptDefault_Text">classMethodArray</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> : 
                <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">path</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"::"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">classMethodArray</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptDefault_Text">descriptor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">method</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">classMethodArray</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">descriptor</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">printHeader</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Result</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">totalTestCount</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">runCount</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentProjectName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"currentProjectName"</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentContextName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"currentContextName"</span>;
            <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&lt;startTestRun totalTestCount='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">totalTestCount</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"'  projectName='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">currentProjectName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' contextName='"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">currentContextName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' /&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            
        <span class="ActionScriptBracket/Brace">}</span>
    
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">printResults</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Result</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//logger.info("printResults");
</span><span class="ActionScriptComment">/*            for(var i:int=0;i&lt;msgQueue.length;i++){
                sendResults(msgQueue[i]);
            }
*/</span>        <span class="ActionScriptBracket/Brace">}</span>
    
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">printFooter</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Result</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//    logger.warn(END_OF_TEST_RUN);
</span>            <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">END_OF_TEST_RUN</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">sendResults</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">msg</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">connected</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">socket</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">send</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">msg</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptComment">//trace(msg);
</span>            <span class="ActionScriptBracket/Brace">}</span>
            
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleConnect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">_ready</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">AsyncListenerWatcher</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LISTENER_READY</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">errorHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">AsyncListenerWatcher</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LISTENER_FAILED</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    
        
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
